extractedDF$col <- NUL
colnames(activitiesDF)[1]<- 'Activity Code'
colnames(activitiesDF)[2]<- 'Activity'
colnames(subjectTrain)[1]<'Subject'
FilteredDS <- activitiesDF
FilteredDS <- rbind(subjectTrain,FilteredDS,extractedDF)
}
{
library(sqldf)
testX <- read.table ("C:\\Downloads\\Coursera\\getdata-projectfiles-UCI HAR Dataset\\UCI HAR Dataset\\test\\X_test.txt",sep=" ")
trainX <- read.table("C:\\Downloads\\Coursera\\getdata-projectfiles-UCI HAR Dataset\\UCI HAR Dataset\\train\\X_train.txt",sep=" ")
testY <- read.table ("C:\\Downloads\\Coursera\\getdata-projectfiles-UCI HAR Dataset\\UCI HAR Dataset\\test\\Y_test.txt",sep=" ")
trainY <- read.table("C:\\Downloads\\Coursera\\getdata-projectfiles-UCI HAR Dataset\\UCI HAR Dataset\\train\\Y_train.txt",sep=" ")
activityLabels <- read.table ("C:\\Downloads\\Coursera\\getdata-projectfiles-UCI HAR Dataset\\UCI HAR Dataset\\activity_labels.txt")
subjectTest <-read.table ("C:\\Downloads\\Coursera\\getdata-projectfiles-UCI HAR Dataset\\UCI HAR Dataset\\test\\subject_test.txt",sep=" ")
subjectTrain <-read.table ("C:\\Downloads\\Coursera\\getdata-projectfiles-UCI HAR Dataset\\UCI HAR Dataset\\train\\subject_train.txt",sep=" ")
featureDF <- read.table("C:\\Downloads\\Coursera\\getdata-projectfiles-UCI HAR Dataset\\UCI HAR Dataset\\features.txt", sep=" ")
meanStdData<-sqldf("select * from featureDF where v2 like '%mean()%' or v2 like '%std()%'")
#trainX <- rbind(testX, trainX)
combinedRaw <- rbind(testX, trainX)
trainY <- rbind(testY, trainY)
activitiesDF<-sqldf("select trainY.V1,activityLabels.V2 from trainY, activityLabels where activityLabels.V1 = trainY.V1")
subjectTrain<-rbind(subjectTest,subjectTrain)
#trainX["trainY"] <- trainY
combinedRaw["activity_code"] <- activitiesDF$V1
#combinedRaw["activity"] <- activitiesDF$V2
CleanedUpDS <- combinedRaw
CleanedUpDS["activity"] <- activitiesDF$V2
#meanStdData$V1<-paste('V',meanStdData$V1,sep="")
#colnames(rows)[which(names(rows) == colName)] <- sqldf(paste("select V2 from meanStdData where V1=",i,sep=""))
extractedDF <- data.frame(col="")
for(i in meanStdData$V1)
{
colName <- paste('V',i,sep="")
rows<-CleanedUpDS[colName]
modifiedColName <-levels(factor(subset(featureDF[['V2']], featureDF[['V1']]==i)))
colnames(rows)[1]<-modifiedColName
extractedDF <- cbind(extractedDF, rows)
}
extractedDF$col <- NULL
colnames(activitiesDF)[1]<- 'Activity Code'
colnames(activitiesDF)[2]<- 'Activity'
colnames(subjectTrain)[1]<'Subject'
FilteredDS <- activitiesDF
FilteredDS <- rbind(subjectTrain,FilteredDS,extractedDF)
}
{
library(sqldf)
testX <- read.table ("C:\\Downloads\\Coursera\\getdata-projectfiles-UCI HAR Dataset\\UCI HAR Dataset\\test\\X_test.txt",sep=" ")
trainX <- read.table("C:\\Downloads\\Coursera\\getdata-projectfiles-UCI HAR Dataset\\UCI HAR Dataset\\train\\X_train.txt",sep=" ")
testY <- read.table ("C:\\Downloads\\Coursera\\getdata-projectfiles-UCI HAR Dataset\\UCI HAR Dataset\\test\\Y_test.txt",sep=" ")
trainY <- read.table("C:\\Downloads\\Coursera\\getdata-projectfiles-UCI HAR Dataset\\UCI HAR Dataset\\train\\Y_train.txt",sep=" ")
activityLabels <- read.table ("C:\\Downloads\\Coursera\\getdata-projectfiles-UCI HAR Dataset\\UCI HAR Dataset\\activity_labels.txt")
subjectTest <-read.table ("C:\\Downloads\\Coursera\\getdata-projectfiles-UCI HAR Dataset\\UCI HAR Dataset\\test\\subject_test.txt",sep=" ")
subjectTrain <-read.table ("C:\\Downloads\\Coursera\\getdata-projectfiles-UCI HAR Dataset\\UCI HAR Dataset\\train\\subject_train.txt",sep=" ")
featureDF <- read.table("C:\\Downloads\\Coursera\\getdata-projectfiles-UCI HAR Dataset\\UCI HAR Dataset\\features.txt", sep=" ")
meanStdData<-sqldf("select * from featureDF where v2 like '%mean()%' or v2 like '%std()%'")
#trainX <- rbind(testX, trainX)
combinedRaw <- rbind(testX, trainX)
trainY <- rbind(testY, trainY)
activitiesDF<-sqldf("select trainY.V1,activityLabels.V2 from trainY, activityLabels where activityLabels.V1 = trainY.V1")
subjectTrain<-rbind(subjectTest,subjectTrain)
#trainX["trainY"] <- trainY
combinedRaw["activity_code"] <- activitiesDF$V1
#combinedRaw["activity"] <- activitiesDF$V2
CleanedUpDS <- combinedRaw
CleanedUpDS["activity"] <- activitiesDF$V2
#meanStdData$V1<-paste('V',meanStdData$V1,sep="")
#colnames(rows)[which(names(rows) == colName)] <- sqldf(paste("select V2 from meanStdData where V1=",i,sep=""))
extractedDF <- data.frame(col="")
for(i in meanStdData$V1)
{
colName <- paste('V',i,sep="")
rows<-CleanedUpDS[colName]
modifiedColName <-levels(factor(subset(featureDF[['V2']], featureDF[['V1']]==i)))
colnames(rows)[1]<-modifiedColName
extractedDF <- cbind(extractedDF, rows)
}
extractedDF$col <- NULL
colnames(activitiesDF)[1]<- 'Activity Code'
colnames(activitiesDF)[2]<- 'Activity'
colnames(subjectTrain)[1]<'Subject'
FilteredDS <- activitiesDF
FilteredDS <- cbind(subjectTrain,FilteredDS,extractedDF)
}
head(FilteredDS)
subjectTrain
x <- 1:4
p <- x/sum(x)
temp <- rbind(x, p)
rownames(temp) <- c("X", "Prob")
temp
temp
mean(temp)
load("C:/Downloads/Coursera/Exploratory_DA/exdata-data-NEI_data/.RData")
head(plotData2)
plotData3<-sqldf("Select year, emissions,type from NEI where year between 1999 and 2008 and fips=24510 order by year")
library(sqldf)
plotData3<-sqldf("Select year, emissions,type from NEI where year between 1999 and 2008 and fips=24510 order by year")
head(plotData3)
ggplot(data=plotData3,y=Emissions, aes(x=year, fill=type ) ) + geom_bar(position="dodge")
library(ggplot2)
ggplot(data=plotData3,y=Emissions, aes(x=year, fill=type ) ) + geom_bar(position="dodge")
ggplot(data=plotData3,y=Emissions, aes(x=year, fill=type, binwidth=1 ) ) + geom_bar(position="dodge")
ggplot(data=plotData3,y=Emissions, aes(x=year, fill=type, binwidth=1 ) ) + geom_bar(position="dodge") +  geom_histogram(binwidth = 3)
ggplot(data=plotData3,y=Emissions, aes(x=year, fill=type, binwidth=1 ) ) + geom_bar(position="dodge") +  geom_histogram(binwidth = 2)
ggplot(data=plotData3,y=Emissions, aes(x=year, fill=type, binwidth=1 ) ) + geom_bar(position="dodge") +  geom_histogram(binwidth = 1)
ggplot(data=plotData3,y=Emissions, aes(x=year, fill=type, binwidth=1 ) ) + geom_bar(position="dodge", binwidth=1)
ggplot(data=plotData3,y=Emissions, aes(x=year, fill=type, binwidth=1 ) ) + geom_bar(position="dodge", binwidth=3)
ggplot(data=plotData3,y=Emissions, aes(x=year, fill=type, binwidth=1 ) ) + geom_bar(position="dodge", binwidth=2)
ggplot(data=plotData3, aes(x=year,y=Emissions, fill=type, binwidth=1 ) ) + geom_bar(position="dodge", binwidth=2)
ggplot(data=plotData3,aes(x=year, fill=type, binwidth=1 ) ) + geom_bar(position="dodge", binwidth=2)
plotData3<-sqldf("Select year, sum(emissions),type from NEI where year between 1999 and 2008 and fips=24510 group by year,type order by year")
ggplot(data=plotData3,y=Emissions, aes(x=year, fill=type, binwidth=1 ) ) + geom_bar(position="dodge", binwidth=1)
plotData3<-sqldf("Select year, emissions,type from NEI where year between 1999 and 2008 and fips=24510 order by year")
ggplot(data=plotData3,y=Emissions, aes(x=year, fill=type, binwidth=1 ) ) + geom_bar(position="dodge", binwidth=1)
maxEmissionPoint99<-sqldf("Select year,max(Emissions), type Emissions from plotData2 where year=1999 and type='POINT'")
maxEmissionNR99<-sqldf("Select year,max(Emissions), type Emissions from plotData2 where year=1999 and type='NON-ROAD'")
maxEmissionNP99<-sqldf("Select year,max(Emissions), type Emissions from plotData2 where year=1999 and type='NONPOINT'")
maxEmissionOR99<-sqldf("Select year,max(Emissions), type Emissions from plotData2 where year=1999 and type='ON-ROAD'")
maxEmissionPoint2008<-sqldf("Select year,max(Emissions), type Emissions from plotData2 where year=2008 and type='POINT'")
maxEmissionNR2008<-sqldf("Select year,max(Emissions), type Emissions from plotData2 where year=2008 and type='NON-ROAD'")
maxEmissionNP2008<-sqldf("Select year,max(Emissions), type Emissions from plotData2 where year=2008 and type='NONPOINT'")
maxEmissionOR2008<-sqldf("Select year,max(Emissions), type Emissions from plotData2 where year=2008 and type='ON-ROAD'")
maxEmissionPoint99<-sqldf("Select year,max(Emissions), type Emissions from plotData3 where year=1999 and type='POINT'")
maxEmissionNR99<-sqldf("Select year,max(Emissions), type Emissions from plotData3 where year=1999 and type='NON-ROAD'")
maxEmissionNP99<-sqldf("Select year,max(Emissions), type Emissions from plotData3 where year=1999 and type='NONPOINT'")
maxEmissionOR99<-sqldf("Select year,max(Emissions), type Emissions from plotData3 where year=1999 and type='ON-ROAD'")
maxEmissionPoint2008<-sqldf("Select year,max(Emissions), type Emissions from plotData3 where year=2008 and type='POINT'")
maxEmissionNR2008<-sqldf("Select year,max(Emissions), type Emissions from plotData3 where year=2008 and type='NON-ROAD'")
maxEmissionNP2008<-sqldf("Select year,max(Emissions), type Emissions from plotData3 where year=2008 and type='NONPOINT'")
maxEmissionOR2008<-sqldf("Select year,max(Emissions), type Emissions from plotData3 where year=2008 and type='ON-ROAD'")
plot3<-ggplot(data=plotData3,y=Emissions, aes(x=year, fill=type, binwidth=1 ) ) + geom_bar(position="dodge", binwidth=1)
plot3<- plot3 +  geom_line(aes(x = maxEmissionPoint99, y = maxEmissionPoint2008), colour = "red")
print(plot3)
maxEmissionPoint99
sqldf("Select year,max(Emissions), type Emissions from plotData3 where year=1999 and type='POINT' and type is not null")
sqldf("Select year,max(Emissions), type from Emissions from plotData3 where year=1999 and type='POINT' and type is not null")
sqldf("Select year,max(Emissions), type from plotData3 where year=1999 and type='POINT' and type is not null")
maxEmissionPoint99<-sqldf("Select year,max(Emissions), type from plotData3 where year=1999 and type='POINT'")
maxEmissionNR99<-sqldf("Select year,max(Emissions), type from plotData3 where year=1999 and type='NON-ROAD'")
maxEmissionNP99<-sqldf("Select year,max(Emissions), type from plotData3 where year=1999 and type='NONPOINT'")
maxEmissionOR99<-sqldf("Select year,max(Emissions), type from plotData3 where year=1999 and type='ON-ROAD'")
maxEmissionPoint2008<-sqldf("Select year,max(Emissions), type from plotData3 where year=2008 and type='POINT'")
maxEmissionNR2008<-sqldf("Select year,max(Emissions), type from plotData3 where year=2008 and type='NON-ROAD'")
maxEmissionNP2008<-sqldf("Select year,max(Emissions), type from plotData3 where year=2008 and type='NONPOINT'")
maxEmissionOR2008<-sqldf("Select year,max(Emissions), type from plotData3 where year=2008 and type='ON-ROAD'")
plot3<-ggplot(data=plotData3,y=Emissions, aes(x=year, fill=type, binwidth=1 ) ) + geom_bar(position="dodge", binwidth=1)
plot3<- plot3 +  geom_line(aes(x = maxEmissionPoint99, y = maxEmissionPoint2008), colour = "red")
print(plot3)
maxEmissionPoint99<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=1999 and type='POINT'")
maxEmissionNR99<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=1999 and type='NON-ROAD'")
maxEmissionNP99<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=1999 and type='NONPOINT'")
maxEmissionOR99<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=1999 and type='ON-ROAD'")
maxEmissionPoint2008<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=2008 and type='POINT'")
maxEmissionNR2008<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=2008 and type='NON-ROAD'")
maxEmissionNP2008<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=2008 and type='NONPOINT'")
maxEmissionOR2008<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=2008 and type='ON-ROAD'")
plot3<-ggplot(data=plotData3,y=Emissions, aes(x=year, fill=type, binwidth=1 ) ) + geom_bar(position="dodge", binwidth=1)
plot3<- plot3 +  geom_line(aes(x = maxEmissionPoint99$year, y = maxEmissionPoint2008$Emmisions), colour = "red")
print(plot3)
maxEmissionPoint99<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=1999 and type='POINT'")
maxEmissionNR99<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=1999 and type='NON-ROAD'")
maxEmissionNP99<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=1999 and type='NONPOINT'")
maxEmissionOR99<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=1999 and type='ON-ROAD'")
maxEmissionPoint2008<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=2008 and type='POINT'")
maxEmissionNR2008<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=2008 and type='NON-ROAD'")
maxEmissionNP2008<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=2008 and type='NONPOINT'")
maxEmissionOR2008<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=2008 and type='ON-ROAD'")
plot3<-ggplot(data=plotData3,y=Emissions, aes(x=year, fill=type, binwidth=1 ) ) + geom_bar(position="dodge", binwidth=1)
plot3<- plot3 +  geom_segment(aes(x = maxEmissionPoint99$year, y = maxEmissionPoint99$Emissions, xend = maxEmissionPoint2008$year, yend = maxEmissionPoint2008$Emissions, arrow=arrow()))
print(plot3)
plot3<-qplot(data=plotData3,y=Emissions, aes(x=year, fill=type, binwidth=1 ) ) + geom_bar(position="dodge", binwidth=1)
print(plot3)
ggplot(data=plotData3,y=Emissions, aes(x=year, fill=type ) ) + geom_bar(position="dodge")
qplot(data=plotData3,y=Emissions, aes(x=year, fill=type ) ) + geom_bar(position="dodge")
qplot(data=plotData3,y=Emissions, aes(x=year) ) + geom_bar(position="dodge")
qplot(data=plotData3,y=Emissions, x=year ) + geom_bar(position="dodge")
qplot(data=plotData3,y=Emissions, x=year )
a <- c(1,2,3)
b <- c(2,3,4)
x <- qplot(a,b)
y <- ggplot(data.frame(a,b), aes(a,b)) +geom_line()
print(x)
print(y)
qplot(data=plotData3,y=Emissions, x=year )
qplot(data=plotData3,y=Emissions, x=year ) + geom("histogram")
qplot(data=plotData3,y=Emissions, x=year, geom="histogram" )
qplot(year,Emissions,date=plotData3, geom="histogram" )
head(plotData3)
qplot(yea, Emissions, date=plotData3, geom="histogram" )
qplot(year, Emissions, date=plotData3, geom="histogram" )
plotData3<-sqldf("Select year, sum(emissions),type from NEI where year between 1999 and 2008 and fips=24510 group by year,typeorder by year")
plotData3<-sqldf("Select year, sum(emissions),type from NEI where year between 1999 and 2008 and fips=24510 group by year,type order by year")
head(plotData3)
ggplot(data=plotData3,y=Emissions, aes(x=year, fill=type ) ) + geom_bar(position="dodge")
ggplot(data=plotData3,y=type, aes(x=year, fill=Emissions ) ) + geom_bar(position="dodge")
plotData3<-sqldf("Select year, sum(emissions) as Emissions,type from NEI where year between 1999 and 2008 and fips=24510 group by year,type order by year")
ggplot(data=plotData3,y=type, aes(x=year, fill=Emissions ) ) + geom_bar(position="dodge")
ggplot(data=plotData3,y=Emissions, aes(x=year, fill=type ) ) + geom_bar(position="dodge")
qplot(year, Emissions, date=plotData3, geom="histogram" )
qplot(type, Emissions, date=plotData3, geom="histogram" )
clear()
cls
qplot(year, Emissions, date=plotData3, geom="histogram" )
qplot(year, Emissions, date=plotData3 )
qplot(year, Emissions, data=plotData3 )
qplot(year, Emissions, data=plotData3,color=type )
qplot(year, Emissions, data=plotData3,color=type, geom="bar" )
qplot(year, Emissions, data=plotData3,color=type, geom="histogram" )
qplot(year, Emissions, data=plotData3, geom="histogram" )
ggplot(data=plotData3,y=Emissions, aes(x=year, fill=type ) ) + geom_bar(position="dodge")
ggplot(data=plotData3,y=Type, aes(x=year, fill=type ) ) + geom_bar(position="dodge")
qplot(year,Emissions, data=plotData3)
plotData3<-sqldf("Select year,  Emissions,type from NEI where year between 1999 and 2008 and fips=24510 group by year,type order by year")
qplot(year,Emissions, data=plotData3, color=type)
qplot(year,Emissions, data=plotData3, color=type, geom="bar")
qplot(year,Emissions, data=plotData3, color=type, geom="density")
ggplot(data=plotData3, aes(x=year, fill=type )) + geom_bar(aes(y = sum(...count...)), position="dodge")
ggplot(data=plotData3, aes(x=year, fill=type )) + geom_bar(aes(y = sum(Emissions)), position="dodge")
ggplot(data=plotData3, aes(x=year, fill=type )) + geom_bar(position="dodge")
ggplot(data=plotData3,y=Emissions, aes(x=year, fill=type ) ) + geom_bar(position="dodge")
head(plotData3)
plotData3<-sqldf("Select year, Emissions,type from NEI where year between 1999 and 2008 and fips=24510 order by year")
ggplot(data=plotData3, aes(x=year, fill=type )) + geom_bar(aes(y = sum(..count..)), position="dodge")
ggplot(data=plotData3, y=Emissions,aes(x=year, fill=type )) + geom_bar(position="dodge")
ggplot(data=plotData3, y=Emissions,aes(x=year, fill=type )) + geom_bar(aes(y=sum(..count..)),position="dodge")
ggplot(data=plotData3, y=Emissions,aes(x=year, fill=type ))
ggplot(data=plotData3, y=Emissions,aes(x=year, fill=type )) + geom_bar(aes(y=(..count..)),position="dodge")
ggplot(data=plotData3, y=Emissions,aes(x=year, fill=type )) + geom_bar(aes(y=sum(Emissions)),position="dodge")
ggplot(data=plotData3, y=Emissions,aes(x=year, fill=type )) + geom_bar(aes(y=sum(Emissions)),position="dodge", stat="identity")
ggplot(data=plotData3, y=Emissions,aes(x=year, fill=type )) + geom_bar(position="dodge", stat="identity")
ggplot(data=plotData3, y=Emissions,aes(x=year, fill=type )) + geom_bar(position="dodge", stat="identity")
ggplot(data=plotData3, y=Emissions,aes(x=year, fill=type )) + geom_bar(position="dodge", stat="identity",y=Emissions)
ggplot(data=plotData3, y=Emissions,aes(x=year, fill=type )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions)
)
factor(plotData3$year)
levels(factor(plotData3$year))
levels(plotData3$year)
levels(factor(plotData3$year))
ggplot(data=plotData3, y=Emissions,aes(x=levels(factor(plotData3$year)), fill=type )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions)
)
ggplot(data=plotData3, y=Emissions,aes(x=factor(plotData3$year), fill=type )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions)
)
ggplot(data=plotData3, y=Emissions,aes(x=factor(plotData3$year), fill=type )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions) )
ggplot(data=plotData3, y=Emissions,aes(x=factor(plotData3$year), fill=type )) + geom_line(position="dodge", stat="identity",aes(y=Emissions) )
ggplot(data=plotData3, y=Emissions,aes(x=factor(plotData3$year), fill=type )) + geom_hist(position="dodge", stat="identity",aes(y=Emissions) )
ggplot(data=plotData3, y=Emissions,aes(x=factor(plotData3$year), fill=type )) + geom_histogram(position="dodge", stat="identity",aes(y=Emissions) )
ggplot(data=plotData3, y=Emissions,aes(x=factor(plotData3$year), fill=type )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions) )
ggplot(data=plotData3, y=Emissions,aes(x=factor(plotData3$year), fill=type )) + geom_jitter(position="dodge", stat="identity",aes(y=Emissions) )
ggplot(data=plotData3, y=Emissions,aes(x=factor(plotData3$year), fill=type )) + geom_ribbon(position="dodge", stat="identity",aes(y=Emissions) )
ggplot(data=plotData3, y=Emissions,aes(x=factor(plotData3$year), fill=type )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions),linetype=2 )
ggplot(data=plotData3, y=Emissions,aes(x=factor(plotData3$year), fill=type )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions),linetype=3 )
plot3<-ggplot(data=plotData3, y=Emissions,aes(x=factor(plotData3$year), fill=type )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions),linetype=3 )
maxEmissionPoint2008<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=2008 and type='POINT'")
maxEmissionNR2008<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=2008 and type='NON-ROAD'")
maxEmissionNP2008<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=2008 and type='NONPOINT'")
maxEmissionOR2008<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=2008 and type='ON-ROAD'")
maxEmissionPoint<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where  and type='POINT'")
maxEmissionNR<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where  and type='NON-ROAD'")
maxEmissionNP<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where  and type='NONPOINT'")
maxEmissionOR<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where  and type='ON-ROAD'")
maxEmissionPoint2008<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=2008 and type='POINT'")
maxEmissionNR2008<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=2008 and type='NON-ROAD'")
maxEmissionNP2008<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=2008 and type='NONPOINT'")
maxEmissionOR2008<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where year=2008 and type='ON-ROAD'")
maxEmissionPoint<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where   type='POINT'")
maxEmissionNR<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where   type='NON-ROAD'")
maxEmissionNP<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where   type='NONPOINT'")
maxEmissionOR<-sqldf("Select year,max(Emissions) AS Emissions, type from plotData3 where   type='ON-ROAD'")
plot3<- plot3 +  geom_segment(aes(x = maxEmissionPoint$year, y = maxEmissionPoint$Emissions, xend = maxEmissionPoint2008$year, yend = maxEmissionPoint2008$Emissions, arrow=arrow()))
print(plot3)
plot3<-ggplot(data=plotData3, y=Emissions,aes(x=factor(plotData3$year), fill=type )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions))
print(plot3)
plot3<- plot3 +  geom_segment(aes(x = maxEmissionPoint$year, y = maxEmissionPoint$Emissions, xend = maxEmissionPoint2008$year, yend = maxEmissionPoint2008$Emissions, arrow=arrow()))
print(plot3)
plot3<-ggplot(data=plotData3, y=Emissions,aes(x=factor(plotData3$year), fill=type )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions))
print(plot3)
plot3 + geom_segment(1999,1000, 2008, 200)
plot3 + geom_segment(x=1999,y=1000, xend=2008, yend=200)
plot3 + geom_segment(mapping=aes(x=1999,y=1000, xend=2008, yend=200), size=2, arrow=arrow(),color=blue)
require(grid)
plot3 + geom_segment(mapping=aes(x=1999,y=1000, xend=2008, yend=200), size=2, arrow=arrow(),color=blue)
plot3 + geom_segment(mapping=aes(x=1999,y=1000, xend=2008, yend=200), size=2, arrow=arrow(),color="blue")
plot3<-ggplot(data=plotData3, y=Emissions,aes(x=factor(plotData3$year), fill=type )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions)) + geom_segment(mapping=aes(x=1999,y=1000, xend=2008, yend=200), size=2, arrow=arrow(),color="blue")
print(plot3)
plot3<-ggplot(data=plotData3, y=Emissions,aes(x=factor(plotData3$year), fill=type )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions)) + geom_segment(mapping=aes(x=1999,y=1000, xend=2008, yend=200))
print(plot3)
plot3<-ggplot(data=plotData3, y=Emissions,aes(x=factor(plotData3$year), fill=type )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions)) + geom_segment(x=1999,y=1000, xend=2008, yend=200)
print(plot3)
plot3<-ggplot(data=plotData3, y=Emissions,aes(x=factor(plotData3$year), fill=type )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions)) + geom_segment(x=1999,y=1000, xend=2008, yend=200, size=2, arrow=arrow(), color="blue")
print(plot3)
plot3<-ggplot(data=plotData3, y=Emissions,aes(x=factor(plotData3$year), fill=type )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions)) + geom_segment((x=1999,y=1000, xend=2008, yend=200, size=2), arrow=arrow(), color="blue")
plot3<-ggplot(data=plotData3, y=Emissions,aes(x=factor(plotData3$year), fill=type )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions)) + geom_segment(aes(x=1999,y=1000, xend=2008, yend=200, size=2),stat="identity", arrow=arrow(), color="blue")
print(plot3)
plot3<-ggplot(data=plotData3, y=Emissions,aes(x=factor(plotData3$year), fill=type )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions))
plot3<- plot3 + geom_text(x=maxEmissionPoint$year, y=maxEmissionPoint$Emissions, label="Max point")
print(plot3)
plot3<- plot3 + geom_text(x=factor(maxEmissionPoint$year), y=maxEmissionPoint$Emissions, label="Max point")
print(plot3)
plot3<- plot3 + geom_text(x=maxEmissionPoint$year, y=maxEmissionPoint$Emissions, label="Max point")
print(plot3)
plot3<- plot3 + geom_text(mapping=aes(x=maxEmissionPoint$year, y=maxEmissionPoint$Emissions, label="Max point")
)
print(plot3)
plot3<-ggplot(data=plotData3, y=Emissions,aes(x=factor(plotData3$year), fill=type )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions))
print(plot3)
maxEmissionPoint
maxEmissionNP
plot3<- plot3 + geom_text(x=maxEmissionNP$year, y=maxEmissionNP$Emissions, label="Max point")
print(plot3)
plot3<- plot3 + geom_text(x=year, y=Emissions,data=maxEmissionNP, label="Max point")
plot3<- plot3 + geom_text(data=maxEmissionNP, mapping=aes(x=year, y=Emissions, label="Max point"))
print(plot3)
plot3<- plot3 + geom_text(data=maxEmissionNP, x=year, y=Emissions, label="Max point")
print(plot3)
plot3<-ggplot(data=plotData3, y=Emissions,aes(x=factor(plotData3$year), fill=type )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions))
print(plot3)
plot3 <- plot3 + xlab("Year") + ylab("Emissions") + ggtitle("Emissions quantity based on type from 1999-2008)
)
plot3 <- plot3 + xlab("Year") + ylab("Emissions") + ggtitle("Emissions quantity based on type from 1999-2008")
print(plot3)
plotData2<-sqldf("Select year, emissions from NEI where year between 1999 and 2008 and fips=24510 order by year")
maxEmission1999<-sqldf("Select year,max(Emissions) Emissions from plotData2 where year=1999")
maxEmission2000<-sqldf("Select year,max(Emissions) Emissions from plotData2 where year=2008")
png(filename="plot2.png",width=700,height=450)
with(plotData2, plot(year, Emissions, main = "Emissions changes for Baltimore city.",
type = "n"))
with(subset(plotData2, year == 1999), points(year, Emissions, col = "red"))
with(subset(plotData2, year == 2000), points(year, Emissions, col = "black"))
with(subset(plotData2, year == 2001), points(year, Emissions, col = "black"))
with(subset(plotData2, year == 2002), points(year, Emissions, col = "black"))
with(subset(plotData2, year == 2003), points(year, Emissions, col = "black"))
with(subset(plotData2, year == 2004), points(year, Emissions, col = "black"))
with(subset(plotData2, year == 2005), points(year, Emissions, col = "black"))
with(subset(plotData2, year == 2006), points(year, Emissions, col = "black"))
with(subset(plotData2, year == 2007), points(year, Emissions, col = "black"))
with(subset(plotData2, year == 2008), points(year, Emissions, col = "blue"))
segments(maxEmission1999$year, maxEmission1999$Emissions, maxEmission2000$year, maxEmission2000$Emissions, col= 'green')
legend(maxEmission1999$year,maxEmission1999$Emissions, pch = 9, title = maxEmission1999$Emissions, angle=90, legend=9)
legend(maxEmission2000$year,maxEmission2000$Emissions, pch = 9, title = maxEmission2000$Emissions, angle=90, legend=9)
legend("topright", pch = 1, col = c("red", "blue"), legend = c(1999,2008))
dev.off()
head(NEI)
setwd("C:\\Downloads\\Coursera\\Exploratory_DA\\exdata-data-NEI_data")
NEI <- readRDS("summarySCC_PM25.rds")
SCC <- readRDS("Source_Classification_Code.rds")
library("sqldf")
library("ggplot2")
sqldf("select distinct NEI.* from NEI,SCC where  NEI.scc = SCC.scc and scc_level_three in ('Anthracite Coal','Bituminous Coal','Coal','Coal-based Synfuel','Gasified Coal','Lignite','Coal Mining, Cleaning, and Material Handling (See 305010)','Coal Mining, Cleaning, and Material Handling (See 305310)','Waste Coal') and scc_level_one like '%Combustion%' order by scc_level_three")
coalData<-sqldf("select distinct NEI.* from NEI,SCC where  NEI.scc = SCC.scc and scc_level_three in ('Anthracite Coal','Bituminous Coal','Coal','Coal-based Synfuel','Gasified Coal','Lignite','Coal Mining, Cleaning, and Material Handling (See 305010)','Coal Mining, Cleaning, and Material Handling (See 305310)','Waste Coal') and scc_level_one like '%Combustion%' order by scc_level_three")
requireData <- sqldf("Select year,Emissions from coalData")
ggplot(requireData, aes(x=year)) + geom_density(aes(fill=factor(Emissions)), size=2)
ggplot(requireData, aes(x=year)) + geom_density(aes(fill=factor(Emissions)), size=1)
ggplot(requireData, aes(y=Emissions)) + geom_density(aes(fill=factor(year)), size=1)
ggplot(requireData, aes(x=Emissions)) + geom_density(aes(fill=factor(year)), size=1)
ggplot(requireData, aes(x=year)) + geom_density(aes(y=Emissions), stat='identity', size=1)
ggplot(requireData, aes(x=year)) + geom_bar(aes(y=Emissions), stat='identity')
ggplot(requireData, aes(x=factor(year)) + geom_bar(aes(y=Emissions), stat='identity')
)
ggplot(requireData, aes(x=factor(year))) + geom_bar(aes(y=Emissions), stat='identity')
ggplot(requireData, aes(x=factor(year))) + geom_bar(aes(y=Emissions), stat='identity') +xlab("Year") +ylab("Emissions") + ggtitle("Coal Combustion related Emissions during different years")
head(SCC)
sqldf("Select distinct EI_Sector from SCC")
sqldf("Select distinct EI_Sector from SCC order by EI_sector")
sqldf("Select * from SCC where SCC.EI_Sector like '%Vehicles%' order by EI_sector")
head(sqldf("Select * from SCC where SCC.EI_Sector like '%Vehicles%' order by EI_sector"))
head(sqldf("Select SCC.EI_Sector,SCC.SCC_level_one, SCC.SCC_level_two, SCC.SCC_level_three, SCC.SCC_level_four from SCC where SCC.EI_Sector like '%Vehicles%' order by EI_sector"))
sqldf("Select distinct EI_Sector from SCC order by EI_sector")
head(sqldf("Select SCC.EI_Sector,SCC.SCC_level_one, SCC.SCC_level_two, SCC.SCC_level_three, SCC.SCC_level_four from SCC where SCC.EI_Sector like '%Vehicles%' order by EI_sector"))
head(sqldf("Select SCC.EI_Sector,SCC.SCC_level_one, SCC.SCC_level_two, SCC.SCC_level_three, SCC.SCC_level_four from SCC where SCC.EI_Sector like '%Vehicles%' order by EI_sector"),100)
mvData<-sqldf("select distinct NEI.* from NEI,SCC where  NEI.scc = SCC.scc and SCC.EI_Sector like '%Vehicles%' and fips=24510 order by NEI.year")
ggplot(mvData, aes(x=year)) + geom_line(stat='identity', aes='Emissions')
ggplot(mvData, aes(x=year)) + geom_line(stat='identity', aes(y='Emissions')
)
ggplot(mvData, aes(x=year, y=Emissions)) + geom_line()
qplot(data=mvData, x=year, y=Emissions)
qplot(data=mvData, x=year, y=Emissions) + geom_line()
ggplot(mvData, aes(x=year)) + geom_bar(stat='identity', aes(y='Emissions')
)
ggplot(mvData, aes(x=factor(year))) + geom_bar(stat='identity', aes(y='Emissions')
)
plot5<-ggplot(mvData, aes(x=factor(year))) + geom_bar(aes(y=Emissions), stat='identity') +xlab("Year") +ylab("Emissions") + ggtitle("Motor Vehicles related Emissions during different years for Baltimore City")
print(plot5)
mvData<-sqldf("select distinct NEI.* from NEI,SCC where  NEI.scc = SCC.scc and SCC.EI_Sector like '%Vehicles%' and fips=24510 order by NEI.year")
plot5<-ggplot(mvData, aes(x=factor(year))) + geom_bar(aes(y=Emissions), stat='identity') +xlab("Year") +ylab("Emissions") + ggtitle("Motor Vehicles related Emissions during different years for Baltimore City")
print(plot5)
mvData<-sqldf("select year,Emissions from NEI,SCC where  NEI.scc = SCC.scc and SCC.EI_Sector like '%Vehicles%' and fips=24510 order by NEI.year")
plot5<-ggplot(mvData, aes(x=factor(year))) + geom_bar(aes(y=Emissions), stat='identity') +xlab("Year") +ylab("Emissions") + ggtitle("Motor Vehicles related Emissions during different years for Baltimore City")
print(plot5)
mvData<-sqldf("select year,Emissions,(case fips when 24510 then 'Baltimore City' when 06037 then 'Los Angeles County' END) as City from NEI,SCC where  NEI.scc = SCC.scc and SCC.EI_Sector like '%Vehicles%' and fips in (24510,06037) order by NEI.year")
plot6<-ggplot(data=plotData3, y=Emissions,aes(x=factor(year), fill=City )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions))
plot6 <- plot6 + xlab("Year") + ylab("Emissions") + ggtitle("Emissions comparison of Baltimore city and Los Angles County")
print(plot6)
plot6<-ggplot(data=mvData, y=Emissions,aes(x=factor(year), fill=City )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions))
plot6 <- plot6 + xlab("Year") + ylab("Emissions") + ggtitle("Emissions comparison of Baltimore city and Los Angles County")
print(plot6)
mvData<-sqldf("select year,Emissions,fips as City from NEI,SCC where  NEI.scc = SCC.scc and SCC.EI_Sector like '%Vehicles%' and fips in (24510,06037) order by NEI.year")
plot6<-ggplot(data=mvData, y=Emissions,aes(x=factor(year), fill=City )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions))
plot6 <- plot6 + xlab("Year") + ylab("Emissions") + ggtitle("Emissions comparison of Baltimore city and Los Angles County")
print(plot6)
sqldf("select distinct EI_sector as City from NEI,SCC where  NEI.scc = SCC.scc and  and fips in (24510,06037) order by NEI.year")
sqldf("select distinct EI_sector as City from NEI,SCC where  NEI.scc = SCC.scc and fips in (24510,06037) order by NEI.year")
sqldf("select distinct EI_sector as City from NEI,SCC where  NEI.scc = SCC.scc and fips in (06037) order by NEI.year")
sqldf("Select * from NEI where fips=06037")
NEI <- readRDS("summarySCC_PM25.rds")
SCC <- readRDS("Source_Classification_Code.rds")
sqldf("Select * from NEI where fips=06037")
sqldf("Select * from NEI where fips=6037")
sqldf("Select distinct fips from NEI")
sqldf("Select * from NEI where fips='06037'")
plotData3<-sqldf("Select year, Emissions,type from NEI where year between 1999 and 2008 and fips='24510' order by year")
plot3<-ggplot(data=plotData3, y=Emissions,aes(x=factor(plotData3$year), fill=type )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions))
plot3 <- plot3 + xlab("Year") + ylab("Emissions") + ggtitle("Emissions quantity based on type from 1999-2008")
print(plot3)
mvData<-sqldf("select year,Emissions,(case fips when 24510 then 'Baltimore City' when 06037 then 'Los Angeles County' END) as City from NEI,SCC where  NEI.scc = SCC.scc and SCC.EI_Sector like '%Vehicles%' and fips in ('24510','06037') order by NEI.year")
mvData<-sqldf("select year,Emissions,fips as City from NEI,SCC where  NEI.scc = SCC.scc and SCC.EI_Sector like '%Vehicles%' and fips in (24510,06037) order by NEI.year")
plot6<-ggplot(data=mvData, y=Emissions,aes(x=factor(year), fill=City )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions))
plot6 <- plot6 + xlab("Year") + ylab("Emissions") + ggtitle("Emissions comparison of Baltimore city and Los Angles County")
print(plot6)
mvData<-sqldf("select year,Emissions,(case fips when 24510 then 'Baltimore City' when 06037 then 'Los Angeles County' END) as City from NEI,SCC where  NEI.scc = SCC.scc and SCC.EI_Sector like '%Vehicles%' and fips in ('24510','06037') order by NEI.year")
plot6<-ggplot(data=mvData, y=Emissions,aes(x=factor(year), fill=City )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions))
plot6 <- plot6 + xlab("Year") + ylab("Emissions") + ggtitle("Emissions comparison of Baltimore city and Los Angles County")
print(plot6)
mvData1 <- subset(mvData,Emissions >= 0)
mvData2 <- subset(mvData,Emissions < 0)
ggplot() +
geom_bar(data = mvData1, aes(x=factor(year), y=Emissions, fill=City),stat = "identity") +
geom_bar(data = mvData2, aes(x=factor(year), y=Emissions, fill=City),stat = "identity") +
scale_fill_brewer(type = "seq", palette = 1)
mvData2
sqldf("Select Emissions from mvData order by Emissions desc")
sqldf("Select Emissions from mvData where City='Los Angles County' order by Emissions desc")
sqldf("Select * from mvData where City='Los Angles County' order by Emissions desc")
sqldf("Select * from mvData where order by Emissions desc")
sqldf("Select * from mvData  order by Emissions desc")
mvData<-sqldf("select year,Emissions,fips from NEI,SCC where  NEI.scc = SCC.scc and SCC.EI_Sector like '%Vehicles%' and fips in ('24510','06037') order by NEI.year")
sqldf("Select distinct fips from mvData  order by Emissions desc")
sqldf("Select * from mvData where fips='06037'  order by Emissions desc")
plot6<-ggplot(data=mvData, y=Emissions,aes(x=factor(year), fill=fips )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions))
plot6 <- plot6 + xlab("Year") + ylab("Emissions") + ggtitle("Emissions comparison of Baltimore city and Los Angles County")
print(plot6)
class(mvData$Emissions)
sqldf("Select max(Emissions) from mvData where fips=06037")
sqldf("Select max(Emissions) from mvData where fips='06037'")
sqldf("Select max(Emissions) from mvData where fips='24510'")
sqldf("Select year,max(Emissions) from mvData where fips='24510'")
sqldf("Select year,max(Emissions) from mvData where fips='06037'")
mvData<-sqldf("select year,Emissions,(case fips when '24510' then 'Baltimore City' when '06037' then 'Los Angeles County' END) as City from NEI,SCC where  NEI.scc = SCC.scc and SCC.EI_Sector like '%Vehicles%' and fips in ('24510','06037') order by NEI.year")
sqldf("Select year,max(Emissions) from mvData where City='Los Angles County'")
sqldf("Select year,max(Emissions) from mvData")
sqldf("Select year,max(Emissions),City from mvData")
plot6<-ggplot(data=mvData, y=Emissions,aes(x=factor(year), fill=City )) + geom_bar(position="dodge", stat="identity",aes(y=Emissions))
plot6 <- plot6 + xlab("Year") + ylab("Emissions") + ggtitle("Emissions comparison of Baltimore city and Los Angles County")
print(plot6)
setwd("C:\\Downloads\\Coursera\\Exploratory_DA\\exdata-data-NEI_data")
weatherData<- read.csv("repdata-data-StormData.csv")
casualityData <- sqldf("Select EVTYPE, sum(FATALITIES) as FAT,sum(injuries) as INJ from weatherData group by EVTYPE order by sum(FATALITIES+injuries) desc")
plot1<-qplot(EVTYPE,FAT+INJ, data=casualityData[1:15,], geom="histogram" )
plot1<- plot1 + theme(title = element_text(face = "bold"), axis.text.x = element_text(angle = 90,  hjust = 1))
plot1<- xlab("Event Type") + ylab("Total Incidents") + ggtitle("Combined plot of fatalities and Injuries as per event")
setwd("C:\\Downloads\\Coursera\\Exploratory_DA\\exdata-data-NEI_data")
weatherData<- read.csv("repdata-data-StormData.csv")
casualityData <- sqldf("Select EVTYPE, sum(FATALITIES) as FAT,sum(injuries) as INJ from weatherData group by EVTYPE order by sum(FATALITIES+injuries) desc")
plot1<-qplot(EVTYPE,FAT+INJ, data=casualityData[1:15,], geom="histogram" )
plot1<- plot1 + theme(title = element_text(face = "bold"), axis.text.x = element_text(angle = 90,  hjust = 1))
plot1<- xlab("Event Type") + ylab("Total Incidents") + ggtitle("Combined plot of fatalities and Injuries as per event")
setwd("C:\\Users\\GauravGeet\\coursera\\RepSearchAssignment2")
weatherData<- read.csv("repdata-data-StormData.csv")
casualityData <- sqldf("Select EVTYPE, sum(FATALITIES) as FAT,sum(injuries) as INJ from weatherData group by EVTYPE order by sum(FATALITIES+injuries) desc")
plot1<-qplot(EVTYPE,FAT+INJ, data=casualityData[1:15,], geom="histogram" )
plot1<- plot1 + theme(title = element_text(face = "bold"), axis.text.x = element_text(angle = 90,  hjust = 1))
plot1<- xlab("Event Type") + ylab("Total Incidents") + ggtitle("Combined plot of fatalities and Injuries as per event")
casualityData <- sqldf("Select EVTYPE, sum(FATALITIES) as FAT,sum(injuries) as INJ from weatherData group by EVTYPE order by sum(FATALITIES+injuries) desc")
plot1<-qplot(EVTYPE,FAT+INJ, data=casualityData[1:15,], geom="histogram" )
plot1<- plot1 + theme(title = element_text(face = "bold"), axis.text.x = element_text(angle = 90,  hjust = 1))
plot1<- plot1+xlab("Event Type") + ylab("Total Incidents") + ggtitle("Combined plot of fatalities and Injuries as per event")
print(plot1)
plot1<-ggplot(data=casualityData, y=FAT+INJ,aes(x=EVTYPE))
print(plot1)
plot1<-ggplot(data=casualityData, y=FAT+INJ,aes(x=EVTYPE),geom_bar())
print(plot1)
plot1<-ggplot(data=casualityData, y=FAT+INJ,aes(x=EVTYPE)) + geom_bar()
print(plot1)
plot1<-qplot(EVTYPE,FAT+INJ, data=casualityData[1:15,], geom="histogram" )
print(plot1)
plot1<-qplot(EVTYPE,FAT+INJ, data=casualityData[1:15,], geom="histogram" stat="identity")
plot1<-qplot(EVTYPE,FAT+INJ, data=casualityData[1:15,], geom="histogram", stat="identity")
print(plot1)
plot1<-qplot(EVTYPE,FAT+INJ, data=casualityData[1:15,], geom="histogram" stat="identity")
plot1<- plot1 + theme(title = element_text(face = "bold"), axis.text.x = element_text(angle = 90,  hjust = 1))
plot1<- xlab("Event Type") + ylab("Total Incidents") + ggtitle("Combined plot of fatalities and Injuries as per event")
plot1<-qplot(EVTYPE,FAT+INJ, data=casualityData[1:15,], geom="histogram" stat="identity")
plot1<- plot1 + theme(title = element_text(face = "bold"), axis.text.x = element_text(angle = 90,  hjust = 1))
plot1<- plot1+xlab("Event Type") + ylab("Total Incidents") + ggtitle("Combined plot of fatalities and Injuries as per event")
print(plot1)
damageData<-sqldf("Select EVTYPE, sum(case PROPDMGEXP WHEN 'K' THEN PROPDMG/1000 WHEN 'M' THEN PROPDMG WHEN 'B' THEN PROPDMG*1000 WHEN 'H' THEN PROPDMG/10000 ELSE 0 END) as propDamage, sum(case CROPDMGEXP WHEN 'K' THEN CROPDMG/1000 WHEN 'M' THEN CROPDMG WHEN 'B' THEN CROPDMG*1000 WHEN 'H' THEN CROPDMG/10000 ELSE 0 END) as cropDamage FROM weatherData group by EVTYPE order by sum((case PROPDMGEXP WHEN 'K' THEN PROPDMG/1000 WHEN 'M' THEN PROPDMG WHEN 'B' THEN PROPDMG*1000 WHEN 'H' THEN PROPDMG/10000 ELSE 0 END)  + (case CROPDMGEXP WHEN 'K' THEN CROPDMG/1000 WHEN 'M' THEN CROPDMG WHEN 'B' THEN CROPDMG*1000 WHEN 'H' THEN CROPDMG/10000 ELSE 0 END)) desc
")
damageData <- within(damageData, EVTYPE <- factor(cropDamage+propDamage,levels=names(sort(table(cropDamage+propDamage), decreasing=TRUE))))
plot2<-qplot(EVTYPE,cropDamage+propDamage, data=damageData[1:25,], geom="histogram", stat="identity" )
plot2<- plot2 + theme(title = element_text(face = "bold"), axis.text.x = element_text(angle = 90,  hjust = 1))
plot2<- plot2 + xlab("Event Type") + ylab("Total Damage in Millions")  + ggtitle("Combined plot of Crop Damage and Property Damage as per event")
print(plot1)
print(plot2)
damageData<-sqldf("Select EVTYPE, sum(case PROPDMGEXP WHEN 'K' THEN PROPDMG/1000 WHEN 'M' THEN PROPDMG WHEN 'B' THEN PROPDMG*1000 WHEN 'H' THEN PROPDMG/10000 ELSE 0 END) as propDamage, sum(case CROPDMGEXP WHEN 'K' THEN CROPDMG/1000 WHEN 'M' THEN CROPDMG WHEN 'B' THEN CROPDMG*1000 WHEN 'H' THEN CROPDMG/10000 ELSE 0 END) as cropDamage FROM weatherData group by EVTYPE order by sum((case PROPDMGEXP WHEN 'K' THEN PROPDMG/1000 WHEN 'M' THEN PROPDMG WHEN 'B' THEN PROPDMG*1000 WHEN 'H' THEN PROPDMG/10000 ELSE 0 END)  + (case CROPDMGEXP WHEN 'K' THEN CROPDMG/1000 WHEN 'M' THEN CROPDMG WHEN 'B' THEN CROPDMG*1000 WHEN 'H' THEN CROPDMG/10000 ELSE 0 END)) desc
")
plot2<-qplot(EVTYPE,cropDamage+propDamage, data=damageData[1:25,], geom="histogram", stat="identity" )
plot2<- plot2 + theme(title = element_text(face = "bold"), axis.text.x = element_text(angle = 90,  hjust = 1))
plot2<- plot2 + xlab("Event Type") + ylab("Total Damage in Millions")  + ggtitle("Combined plot of Crop Damage and Property Damage as per event")
print(plot2)
print(plot1)
print(plot2)
